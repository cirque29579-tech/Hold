<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Career Assessment Profile</title>

<style>
:root{--page-bg:#f6f7fb;--card:#ffffff;--muted:#6b7280;--accent:#335d9f;--accent2:#2f9d6e;--border:#e6eef8;--paper-margin:20mm;}
html,body{height:100%;margin:0;background:var(--page-bg);font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;}
.container{max-width:940px;margin:20px auto;padding:18px;}
.card{background:var(--card);border-radius:12px;padding:22px;box-shadow:0 8px 30px rgba(20,30,60,0.06);}

/* Header */
.header-row{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px}
.brand{font-family:'Merriweather',serif;font-size:1.45rem;color:var(--accent);font-weight:700;}
.meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:0.95rem;}
.meta input{border:none;border-bottom:1px dashed #e6eef8;background:transparent;padding:4px 6px;font-size:0.95rem}

/* Questions */
#questions{margin-top:8px}
.q{border-radius:10px;background:#fbfeff;padding:12px;margin:12px 0;border:1px solid var(--border)}
.q p{margin:0 0 8px;font-weight:700;color:#0f172a}
.opts{display:flex;gap:12px;flex-wrap:wrap}
.opt{flex:1 1 240px;padding:12px;border-radius:10px;border:1px solid rgba(15,23,42,0.10);cursor:pointer;background:transparent;display:flex;align-items:flex-start;gap:10px;transition:background .2s, border-color .2s}
.opt input{margin-top:4px}
.opt.selected{background:#e8f5e8;border-color:var(--accent2);}

/* Actions */
.actions{display:flex;gap:10px;justify-content:center;margin-top:14px}
.actions.stacked{flex-direction:column;align-items:stretch}
button.btn{background:var(--accent);color:white;border:0;padding:12px 16px;border-radius:10px;font-weight:700;cursor:pointer}
button.ghost{background:transparent;border:1px solid rgba(15,23,42,0.15);color:#0f172a}
button.small{padding:10px 12px;font-size:.95rem}
button.danger{border-color:#dc2626;color:#dc2626}

/* Bottom progress (moved) */
.progress-bottom{margin:8px 0 2px 0;text-align:center;color:var(--muted);font-weight:600}

/* Results */
#results{display:none;margin-top:18px}
.report-header{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;}
.type-box{border:2px solid var(--accent);border-radius:10px;padding:20px;background:#fff;margin-bottom:10px;width:100%;max-width:520px;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.type-box .type{font-family:'Merriweather',serif;font-size:2.5rem;font-weight:800;color:var(--accent);margin:0 0 10px;text-transform:uppercase;letter-spacing:2px}
.type-box .title{font-family:'Merriweather',serif;font-size:1.6rem;color:#0b2540;margin:0;font-weight:600}
.report-sub{color:var(--muted);margin:2px 0 0 0;font-size:1.05rem;}
.report-block{padding:14px;border-radius:8px;background:#fbfdff;border:1px solid var(--border);margin-top:12px}
.section-title{font-family:'Merriweather',serif;color:var(--accent);margin-bottom:8px;padding-bottom:6px;border-bottom:2px solid rgba(0,0,0,0.03)}
#barChart{margin-top:10px}
.trait-pair{display:flex;justify-content:space-between;align-items:center;gap:12px;margin:8px 0;}
.trait-box{flex:1;padding:10px;border-radius:8px;border:1px solid var(--border);text-align:center;background:#fbfeff;transition:background .2s}
.trait-box.selected{background:#e8f5e8;border-color:var(--accent2);font-weight:700}
.trait-desc{font-size:.78rem;color:#6b7280;margin-top:4px;line-height:1.25}
.careers-table{width:100%;border-collapse:collapse;margin-top:10px}
.careers-table th,.careers-table td{border:1px solid var(--border);padding:8px;text-align:left;vertical-align:top}
.careers-table th{background:var(--accent);color:white;font-weight:bold}
.careers-table tr:nth-child(even){background:#f8f9fa}
.salary-note{color:var(--muted);font-size:0.85rem;margin-top:8px}
.print-header{font-family:'Merriweather',serif;font-size:1.05rem;color:var(--accent);font-weight:600;margin-bottom:12px;display:flex;align-items:center;gap:20px;padding-top:5mm}
.print-header span{display:inline-block}

/* Print */
@media print{
  body,html{background:white;margin:0;padding:0;}
  .header-row,.meta input,#questions-section,.q,.opt,.opt.selected,#results,.report-block,.section-title,.report-title,.report-sub,.trait-pair,.trait-box,.print-header,.trait-desc,.careers-table{display:block !important;}
  .actions,#progress-bottom,button,input[type=radio]{display:none !important;}
  #questions-section{page-break-after:always;}
  #results{page-break-before:always;margin-top:0;padding-top:0;}
  .container{max-width:100%;padding:var(--paper-margin);margin:0;}
  .card{box-shadow:none;border:none;padding:0;}
  .opt.selected{background:#e8f5e8;border:2px solid var(--accent2);padding:8px;}
  .q{padding:15px;margin:8px 0;border:1px solid #ccc;page-break-inside:avoid;}
  .opts{flex-direction:row;gap:15px;page-break-inside:avoid;}
  .report-block{margin:10px 0;page-break-inside:avoid;}
  .trait-pair{margin:5px 0;}
  .trait-box{padding:8px;}
  .type-box{border:2px solid var(--accent);box-shadow:none}
  .print-header{position:static;margin-top:0;page-break-inside:avoid;}
  @page{margin-top:20mm;}
  .careers-table{width:100%}
}

/* iPhone & small screens */
@media (max-width:720px){
  .container{max-width:100%;padding:14px;margin:0 auto;}
  .header-row{flex-direction:column;align-items:flex-start;gap:8px}
  .meta{flex-wrap:wrap;gap:6px;font-size:.9rem}
  .brand{font-size:1.25rem}
  .opts{flex-direction:column}
  .trait-pair{flex-direction:column;gap:8px}
  .trait-box{width:100%}
  .actions{gap:8px}
}
@media (max-width:480px){
  .container{padding:12px}
  .card{padding:16px;border-radius:14px}
  .opt{flex:1 1 auto}
  .actions{gap:8px}
  button.btn,button.ghost{padding:12px 14px;border-radius:12px}
}
</style>
</head>
<body>
<div class="container">
  <div class="card">

    <div class="header-row">
      <div>
        <div class="brand">Careers based on your strengths</div>
        <div style="color:var(--muted);font-size:0.95rem"><span id="subtitleCount">40</span>-question MBTI-style assessment</div>
      </div>
      <div class="meta">Student: <input id="studentName" placeholder="(Student name)" /> Date: <input id="reportDate" /></div>
    </div>

    <section id="questions-section">
      <form id="quizForm">
        <div id="questions"></div>

        <div class="actions stacked">
          <div id="progress-bottom" class="progress-bottom">
            <span id="progress">Question 1 of 40</span>
          </div>
          <button type="button" id="seeResults" class="btn">See Results</button>
        </div>
      </form>
    </section>

    <section id="results" style="display:none;">
      <div class="print-header">
        <span id="printName"></span>
        <span id="printDate"></span>
      </div>

      <div class="report-header">
        <div class="type-box">
          <h2 class="type" id="reportType"></h2>
          <p class="title" id="reportTitle"></p>
        </div>
        <p class="report-sub" id="reportSub"></p>
      </div>

      <div id="barChart">
        <div class="trait-pair" id="traitPairEI">
          <div class="trait-box" id="traitBoxE">Extravert <span id="percentE"></span>%
            <div class="trait-desc">Outgoing, sociable, and energized by social interaction.</div>
          </div>
          <div class="trait-box" id="traitBoxI">Introvert <span id="percentI"></span>%
            <div class="trait-desc">Reflective, reserved, and energized by solitude.</div>
          </div>
        </div>
        <div class="trait-pair" id="traitPairSN">
          <div class="trait-box" id="traitBoxS">Sensing <span id="percentS"></span>%
            <div class="trait-desc">Focused on the present, practical, and detail-oriented.</div>
          </div>
          <div class="trait-box" id="traitBoxN">Intuitive <span id="percentN"></span>%
            <div class="trait-desc">Imaginative, future-focused, and big-picture thinker.</div>
          </div>
        </div>
        <div class="trait-pair" id="traitPairTF">
          <div class="trait-box" id="traitBoxT">Thinking <span id="percentT"></span>%
            <div class="trait-desc">Logical, objective, and decision-based on facts.</div>
          </div>
          <div class="trait-box" id="traitBoxF">Feeling <span id="percentF"></span>%
            <div class="trait-desc">Empathetic, values-driven, and considers emotions.</div>
          </div>
        </div>
        <div class="trait-pair" id="traitPairJP">
          <div class="trait-box" id="traitBoxJ">Judging <span id="percentJ"></span>%
            <div class="trait-desc">Organized, planned, and decisive.</div>
          </div>
          <div class="trait-box" id="traitBoxP">Perceiving <span id="percentP"></span>%
            <div class="trait-desc">Flexible, spontaneous, and open to change.</div>
          </div>
        </div>
      </div>

      <div class="report-block">
        <h3 class="section-title">Type Summary</h3>
        <p id="summary"></p>
        <p><strong>Likes:</strong> <span id="likes"></span></p>
        <p><strong>Strengths:</strong> <span id="strengths"></span></p>
        <p><strong>Areas to Improve:</strong> <span id="growth"></span></p>
      </div>

      <div class="report-block">
        <h3 class="section-title">Most Compatible Types</h3>
        <div id="compatible"></div>
      </div>

      <div class="report-block">
        <h3 class="section-title">Least Compatible Types</h3>
        <div id="incompatible"></div>
      </div>

      <div class="report-block" id="famousBlock" style="display:none;">
        <h3 class="section-title">Famous <span id="famousType"></span>s</h3>
        <ul id="famous"></ul>
      </div>

      <div class="report-block">
        <h3 class="section-title">20 Career Matches</h3>
        <table class="careers-table">
          <thead>
            <tr>
              <th>Career Match</th>
              <th>Reason for Fit</th>
              <th>Annual Salary Range</th>
            </tr>
          </thead>
          <tbody id="careers-tbody"></tbody>
        </table>
        <p class="salary-note">*Salary ranges are generic demo values—tune for your region/market.</p>
      </div>

      <div class="report-block">
        <h3 class="section-title">High School Prep</h3>
        <p id="prep"></p>
      </div>
    </section>

    <!-- Post-results actions -->
    <div class="actions" id="postActions" style="display:none;margin-top:14px">
      <button id="savePdf" class="btn">Save Results (PDF)</button>
      <button id="reviewQuestions" class="ghost small">Review Questions</button>
      <button id="endBtn" class="ghost small danger" title="Clear everything and close">End</button>
    </div>

  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- Questions (40 total) ---
  const questions = [
    {q:"When faced with a group project, you prefer to…",a:[["work independently","I"],["brainstorm with others","E"]]},
    {q:"You make decisions based more on…",a:[["facts and logic","T"],["feelings and values","F"]]},
    {q:"When learning something new, you like to…",a:[["focus on details and practice","S"],["explore theories and ideas","N"]]},
    {q:"Your workspace or notes are usually…",a:[["orderly and structured","J"],["flexible and spontaneous","P"]]},
    {q:"You get energy from…",a:[["quiet time alone","I"],["being around others","E"]]},
    {q:"You trust…",a:[["experience","S"],["imagination","N"]]},
    {q:"When solving problems, you…",a:[["analyze logically","T"],["consider how people feel","F"]]},
    {q:"You prefer to…",a:[["plan ahead","J"],["see what happens","P"]]},
    {q:"You recharge by…",a:[["solitude","I"],["socializing","E"]]},
    {q:"You notice first…",a:[["what's real and present","S"],["what could be possible","N"]]},
    {q:"You tend to…",a:[["stay objective","T"],["seek harmony","F"]]},
    {q:"Deadlines feel best when…",a:[["met early","J"],["met barely on time","P"]]},
    {q:"At a party you are more likely to…",a:[["talk with a few close friends","I"],["mingle widely","E"]]},
    {q:"You enjoy subjects that…",a:[["teach practical skills","S"],["involve creativity or ideas","N"]]},
    {q:"Your friends say you're…",a:[["logical and fair","T"],["empathetic and caring","F"]]},
    {q:"When organizing homework, you…",a:[["make lists and schedules","J"],["go with the flow","P"]]},
    {q:"You often…",a:[["reflect before acting","I"],["act then reflect","E"]]},
    {q:"You'd rather…",a:[["follow proven steps","S"],["try new methods","N"]]},
    {q:"You value…",a:[["truth","T"],["compassion","F"]]},
    {q:"You like rules to be…",a:[["clear and firm","J"],["flexible","P"]]},
    {q:"In class discussions, you usually…",a:[["listen first, then share","I"],["jump in with ideas","E"]]},
    {q:"When reading, you focus more on…",a:[["concrete facts/events","S"],["themes/meanings","N"]]},
    {q:"If a friend asks for advice, you give…",a:[["objective pros/cons","T"],["what feels right for them","F"]]},
    {q:"Your schedule tends to be…",a:[["planned day-to-day","J"],["open to changes","P"]]},
    {q:"New clubs or groups feel…",a:[["draining at first","I"],["exciting and energizing","E"]]},
    {q:"In science labs, you prefer…",a:[["step-by-step procedures","S"],["designing the experiment","N"]]},
    {q:"When judging a debate, you weigh…",a:[["logic and evidence","T"],["human impact","F"]]},
    {q:"For big assignments, you…",a:[["start early with milestones","J"],["work in bursts near the end","P"]]},
    {q:"On a free afternoon, you’d rather…",a:[["have quiet ‘me time’","I"],["hang out with friends","E"]]},
    {q:"When telling a story, you share…",a:[["exact details","S"],["the overall idea","N"]]},
    {q:"When resolving conflict, you push for…",a:[["fairness and rules","T"],["feelings and care","F"]]},
    {q:"Your backpack/locker is…",a:[["sorted and tidy","J"],["organized ‘in your own way’","P"]]},
    {q:"Meeting new people is…",a:[["a bit tiring","I"],["energizing","E"]]},
    {q:"In math word problems, you prefer…",a:[["realistic examples","S"],["abstract puzzles","N"]]},
    {q:"Group decisions should be…",a:[["based on criteria","T"],["based on consensus","F"]]},
    {q:"When plans change suddenly, you…",a:[["feel thrown off","J"],["adapt quickly","P"]]},
    {q:"Your ideal study environment is…",a:[["quiet and private","I"],["lively but focused","E"]]},
    {q:"When learning history, you like…",a:[["timelines and facts","S"],["causes and patterns","N"]]},
    {q:"Choosing courses, you prefer…",a:[["what builds skills","T"],["what inspires you","F"]]},
    {q:"On a project team, you’re the one who…",a:[["creates the checklist","J"],["keeps options open","P"]]}
  ];

  const qContainer = document.getElementById('questions');
  document.getElementById('subtitleCount').textContent = questions.length.toString();

  const progressEl = document.getElementById('progress');
  progressEl.textContent = `Question 1 of ${questions.length}`;

  // Render questions
  qContainer.innerHTML = questions.map((obj, i) => {
    const options = obj.a.map((pair, ix) => {
      const id = `q${i}_${ix}`;
      return `<label class="opt" data-value="${pair[1]}">
                <input type="radio" name="q${i}" value="${pair[1]}" id="${id}">
                <span>${pair[0]}</span>
              </label>`;
    }).join('');
    return `<div class="q"><p>${i+1}. ${obj.q}</p><div class="opts">${options}</div></div>`;
  }).join('');

  // Selection + progress handling
  function refreshSelectionsAndProgress() {
    const done = document.querySelectorAll('input[type=radio]:checked').length;
    const total = questions.length;
    const nextNum = Math.min(done + 1, total);
    progressEl.textContent = `Question ${nextNum} of ${total}`;
    document.querySelectorAll('.opt').forEach(opt => opt.classList.remove('selected'));
    document.querySelectorAll('input[type=radio]:checked').forEach(checked => {
      const label = checked.closest('.opt');
      if (label) label.classList.add('selected');
    });
  }
  document.querySelectorAll("input[type=radio]").forEach(inp => {
    inp.addEventListener("change", refreshSelectionsAndProgress);
  });

  // Save PDF (print)
  document.getElementById('savePdf').addEventListener('click', () => {
    window.print();
  });

  // Cache results DOM elements
  const traitBoxE = document.getElementById('traitBoxE');
  const traitBoxI = document.getElementById('traitBoxI');
  const traitBoxS = document.getElementById('traitBoxS');
  const traitBoxN = document.getElementById('traitBoxN');
  const traitBoxT = document.getElementById('traitBoxT');
  const traitBoxF = document.getElementById('traitBoxF');
  const traitBoxJ = document.getElementById('traitBoxJ');
  const traitBoxP = document.getElementById('traitBoxP');

  const percentE = document.getElementById('percentE');
  const percentI = document.getElementById('percentI');
  const percentS = document.getElementById('percentS');
  const percentN = document.getElementById('percentN');
  const percentT = document.getElementById('percentT');
  const percentF = document.getElementById('percentF');
  const percentJ = document.getElementById('percentJ');
  const percentP = document.getElementById('percentP');

  const famousBlock = document.getElementById('famousBlock');
  const famousTypeEl = document.getElementById('famousType');
  const famousListEl = document.getElementById('famous');

  // See Results
  document.getElementById('seeResults').addEventListener('click', () => {
    const answers = document.querySelectorAll('input[type=radio]:checked');
    if (answers.length < questions.length) {
      alert("Please answer all questions.");
      return;
    }
    const scores = {E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
    answers.forEach(a => { scores[a.value]++; });
    const type =
      (scores.I >= scores.E ? 'I' : 'E') +
      (scores.S >= scores.N ? 'S' : 'N') +
      (scores.T >= scores.F ? 'T' : 'F') +
      (scores.J >= scores.P ? 'J' : 'P');
    renderResults(type, scores, questions.length);
  });

  // Review Questions
  document.getElementById('reviewQuestions').addEventListener('click', () => {
    document.getElementById('results').style.display = 'none';
    document.getElementById('questions-section').style.display = 'block';
    document.getElementById('postActions').style.display = 'flex';
    refreshSelectionsAndProgress();
    document.getElementById('questions-section').scrollIntoView({behavior:'smooth'});
  });

  // END: clear, reset, try to close
  document.getElementById('endBtn').addEventListener('click', () => {
    const ok = confirm('End and clear all answers?');
    if (!ok) return;

    document.getElementById('quizForm').reset();
    document.querySelectorAll('.opt').forEach(o => o.classList.remove('selected'));
    progressEl.textContent = `Question 1 of ${questions.length}`;
    document.getElementById('results').style.display = 'none';
    document.getElementById('questions-section').style.display = 'block';
    document.getElementById('postActions').style.display = 'none';
    window.scrollTo({top:0,behavior:'smooth'});

    try {
      window.close();
      setTimeout(() => {
        if (!document.hidden) location.href = 'about:blank';
      }, 300);
    } catch(e){
      location.href = 'about:blank';
    }
  });

  function renderResults(type, scores, totalQuestions) {
    const studentName = document.getElementById('studentName').value || 'Student';
    const reportDate = document.getElementById('reportDate').value || new Date().toLocaleDateString();
    document.getElementById('printName').textContent = `Student: ${studentName}`;
    document.getElementById('printDate').textContent = `Date: ${reportDate}`;
    const totalPerPair = totalQuestions / 4;

    // Percentages (rounded)
    percentE.textContent = Math.round((scores.E / totalPerPair) * 100);
    percentI.textContent = Math.round((scores.I / totalPerPair) * 100);
    percentS.textContent = Math.round((scores.S / totalPerPair) * 100);
    percentN.textContent = Math.round((scores.N / totalPerPair) * 100);
    percentT.textContent = Math.round((scores.T / totalPerPair) * 100);
    percentF.textContent = Math.round((scores.F / totalPerPair) * 100);
    percentJ.textContent = Math.round((scores.J / totalPerPair) * 100);
    percentP.textContent = Math.round((scores.P / totalPerPair) * 100);

    // Highlight winners
    [traitBoxE,traitBoxI,traitBoxS,traitBoxN,traitBoxT,traitBoxF,traitBoxJ,traitBoxP].forEach(b => b.classList.remove('selected'));
    (type.includes('E') ? traitBoxE : traitBoxI).classList.add('selected');
    (type.includes('S') ? traitBoxS : traitBoxN).classList.add('selected');
    (type.includes('T') ? traitBoxT : traitBoxF).classList.add('selected');
    (type.includes('J') ? traitBoxJ : traitBoxP).classList.add('selected');

    // Pull content
    const tData = getTypeData(type);
    document.getElementById('reportType').textContent = type;
    document.getElementById('reportTitle').textContent = tData.title;
    document.getElementById('reportSub').textContent = tData.subtitle;
    document.getElementById('summary').textContent = tData.summary;
    document.getElementById('likes').textContent = tData.likes;
    document.getElementById('strengths').textContent = tData.strengths;
    document.getElementById('growth').textContent = tData.growth;
    document.getElementById('compatible').innerHTML = tData.compatible.map(t => `<p><strong>${t.type}</strong> — ${t.desc}</p>`).join('');
    document.getElementById('incompatible').innerHTML = tData.incompatible.map(t => `<p><strong>${t.type}</strong> — ${t.desc}</p>`).join('');

    // Famous (hide block if none)
    if (tData.famous && tData.famous.length) {
      famousTypeEl.textContent = type;
      famousListEl.innerHTML = tData.famous.map(name => `<li>${name}</li>`).join('');
      famousBlock.style.display = 'block';
    } else {
      famousBlock.style.display = 'none';
      famousListEl.innerHTML = '';
    }

    // Careers table
    const careersTbody = document.getElementById('careers-tbody');
    careersTbody.innerHTML = tData.careers.map(c => `
      <tr>
        <td><strong>${c.title}</strong></td>
        <td>${c.why}</td>
        <td>${c.salary}</td>
      </tr>`).join('');

    document.getElementById('questions-section').style.display = 'none';
    document.getElementById('results').style.display = 'block';
    document.getElementById('postActions').style.display = 'flex';
    document.getElementById('results').scrollIntoView({behavior:'smooth'});
  }

  // --------- CONFIG: (Optional) Add famous names per type here ----------
  // These are intentionally blank to avoid placeholder "(Demo)" entries.
  // If you want names to appear, just add arrays of strings. Example:
  // famousByType.INTJ = ["Isaac Newton*","Elon Musk*","Angela Merkel*"];
  // (*Fan-typed; public lists often disagree.)
  const famousByType = {
    ISTJ: [],
    ISFJ: [],
    INFJ: [],
    INTJ: [],
    ISTP: [],
    ISFP: [],
    INFP: [],
    INTP: [],
    ESTP: [],
    ESFP: [],
    ENFP: [],
    ENTP: [],
    ESTJ: [],
    ESFJ: [],
    ENFJ: [],
    ENTJ: []
  };
  // ---------------------------------------------------------------------

  function getTypeNickname(type){
    const names = {
      ISTJ:"The Organizer", ISFJ:"The Nurturer", INFJ:"The Visionary", INTJ:"The Strategist",
      ISTP:"The Tinkerer", ISFP:"The Creator", INFP:"The Idealist", INTP:"The Analyst",
      ESTP:"The Dynamo", ESFP:"The Entertainer", ENFP:"The Inspirer", ENTP:"The Inventor",
      ESTJ:"The Director", ESFJ:"The Supporter", ENFJ:"The Mentor", ENTJ:"The Commander"
    };
    return names[type] || "Personality Match";
  }

  function synthesizeCareers(type){
    const base = [
      ["Software Developer","Problem-solving and building systems fit your thinking style.","$75k–$140k"],
      ["Data Analyst","Structured analysis and patterns match your strengths.","$60k–$115k"],
      ["Mechanical Technician","Hands-on troubleshooting and precision work.","$45k–$85k"],
      ["Project Coordinator","Planning, communication, and follow-through.","$50k–$95k"],
      ["Graphic Designer","Creativity + translating ideas visually.","$50k–$100k"],
      ["Marketing Associate","Ideas, messaging, and audience awareness.","$48k–$95k"],
      ["Teacher","Explaining concepts and guiding growth.","$45k–$90k"],
      ["Nurse","Care, attention to detail, steady under pressure.","$65k–$120k"],
      ["Electrician","Applied problem-solving and safety focus.","$50k–$100k"],
      ["Business Analyst","Requirements, systems, and outcomes.","$65k–$120k"],
      ["Entrepreneur","Initiative, resilience, and adaptability.","Varies widely"],
      ["UX Designer","Empathy + logic to improve experiences.","$70k–$135k"],
      ["Civil Engineer","Designing practical solutions for society.","$70k–$130k"],
      ["Accountant","Accuracy, structure, and reliability.","$55k–$105k"],
      ["Sales Consultant","Influence, relationships, and goals.","$50k–$130k+"],
      ["Content Producer","Storytelling and creativity with deadlines.","$45k–$95k"],
      ["Web Developer","Making ideas work on the web.","$60k–$125k"],
      ["Lab Researcher","Methodical testing and discovery.","$55k–$110k"],
      ["Operations Manager","Coordinating people, tools, and timelines.","$70k–$140k"],
      ["Cybersecurity Analyst","Systems thinking + vigilance.","$75k–$150k"]
    ];
    return base.map(([title,why,salary]) => ({title,why:`(${type}) ${why}`,salary}));
  }

  function synthesizeCompatibles(type){
    const all = ["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP","ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"];
    const others = all.filter(t => t !== type);
    const shuffled = others.sort(() => Math.random()-0.5);
    const comp = shuffled.slice(0,3).map(t => ({type:t, desc:"Complementary strengths and communication style."}));
    const incomp = shuffled.slice(3,6).map(t => ({type:t, desc:"Different priorities that need extra communication."}));
    return {comp, incomp};
  }

  function getTypeData(type){
    const nickname = getTypeNickname(type);
    const lens = {
      E:"outgoing, quick to engage", I:"reflective, thoughtful",
      S:"practical, detail-focused", N:"imaginative, big-picture",
      T:"logical, objective", F:"empathetic, values-driven",
      J:"organized, structured", P:"flexible, adaptable"
    };
    const blurb =
      `${type[0]==='E'?lens.E:lens.I}; ${type[1]==='S'?lens.S:lens.N}; ` +
      `${type[2]==='T'?lens.T:lens.F}; and ${type[3]==='J'?lens.J:lens.P}.`;

    const {comp, incomp} = synthesizeCompatibles(type);

    return {
      title: nickname,
      subtitle: "Your four-letter pattern suggests how you take in information and make decisions.",
      summary: `You show a ${type} pattern—${blurb} You likely prefer tasks and study habits that play to these tendencies.`,
      likes: "Work that matches your pace, clear expectations, and chances to grow real strengths.",
      strengths: "Self-awareness, commitment to improvement, and ability to learn from feedback.",
      growth: "Balance your defaults by practicing the opposite side in low-stakes settings.",
      compatible: comp,
      incompatible: incomp,
      famous: famousByType[type] || [],
      prep: "Choose classes and clubs that stretch your weaker letters while doubling down on natural strengths.",
      careers: synthesizeCareers(type)
    };
  }
  // ---------- End ----------
});
</script>
</body>
</html>
